{% extends 'base.html' %}
{% block title %}{{ product.title }}{% endblock %}

{% block content %}
<div class="container">
    <!-- Gallery -->
    <div class="gallery">
        <div class="thumbnails">
            {% for img in product.images.all %}
                <img src="{{ img.image.url }}" alt="{{ product.title }}"
                     onclick="changeImage('{{ img.image.url }}', {{ forloop.counter0 }})">
            {% endfor %}
        </div>
        <div class="main-image">
            {% if product.images.all %}
                <img id="mainImage" src="{{ product.images.first.image.url }}"
                     alt="{{ product.title }}" onclick="openModal(currentIndex)">
            {% endif %}
        </div>
    </div>

    <!-- Info -->
    <div class="info">
        <h1>{{ product.title }}</h1>
        <div class="price">{{ formatted_price }} soâ€˜m</div>
        <div class="features">
            <strong>Xususiyatlari:</strong><br>
            {{ product.feature|safe }}
        </div>
    </div>
</div>

<!-- About section -->
<div class="section">
    <h2>Tovar haqida</h2>
    <p>{{ product.description|safe }}</p>
</div>

<!-- Modal -->
<div id="imageModal" class="modal">
    <span class="close" onclick="closeModal()">&times;</span>
    <span class="prev" onclick="changeModal(-1)">&#10094;</span>
    <span class="next" onclick="changeModal(1)">&#10095;</span>
    <div class="modal-content">
        <img id="modalImage" src="">
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    images = [
        {% for img in product.images.all %}
            "{{ img.image.url }}",
        {% endfor %}
    ];
    currentIndex = 0;
</script>
{% endblock %}
